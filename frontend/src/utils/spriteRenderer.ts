import type { Direction } from '../types/game.types';

// 16x16 pixel character sprite data
// Each sprite is a 16x16 grid represented as a 2D array
// 0 = transparent, 1-9 = different colors

export interface SpriteData {
  width: number;
  height: number;
  pixels: number[][];
  colors: string[];
}

// Define character sprites for each direction and animation frame
export const characterSprites: Record<Direction, SpriteData[]> = {
  idle: [
    {
      width: 16,
      height: 16,
      colors: ['transparent', '#FFE0BD', '#2C1810', '#8B4513', '#FF6B35', '#4A4A4A'],
      pixels: [
        [0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],
        [0,0,0,0,0,0,2,2,2,2,0,0,0,0,0,0],
        [0,0,0,0,0,2,1,1,1,1,2,0,0,0,0,0],
        [0,0,0,0,2,1,1,1,1,1,1,2,0,0,0,0],
        [0,0,0,0,2,1,2,1,1,2,1,2,0,0,0,0],
        [0,0,0,0,2,1,1,1,1,1,1,2,0,0,0,0],
        [0,0,0,0,2,1,2,2,2,2,1,2,0,0,0,0],
        [0,0,0,0,0,2,2,2,2,2,2,0,0,0,0,0],
        [0,0,0,0,0,3,4,4,4,4,3,0,0,0,0,0],
        [0,0,0,0,3,3,4,4,4,4,3,3,0,0,0,0],
        [0,0,0,0,3,4,4,4,4,4,4,3,0,0,0,0],
        [0,0,0,0,3,4,4,4,4,4,4,3,0,0,0,0],
        [0,0,0,0,0,3,3,3,3,3,3,0,0,0,0,0],
        [0,0,0,0,0,5,5,0,0,5,5,0,0,0,0,0],
        [0,0,0,0,0,5,5,0,0,5,5,0,0,0,0,0],
        [0,0,0,0,0,5,5,0,0,5,5,0,0,0,0,0],
      ]
    }
  ],
  down: [
    // Frame 0: Standing
    {
      width: 16,
      height: 16,
      colors: ['transparent', '#FFE0BD', '#2C1810', '#8B4513', '#FF6B35', '#4A4A4A'],
      pixels: [
        [0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],
        [0,0,0,0,0,0,2,2,2,2,0,0,0,0,0,0],
        [0,0,0,0,0,2,1,1,1,1,2,0,0,0,0,0],
        [0,0,0,0,2,1,1,1,1,1,1,2,0,0,0,0],
        [0,0,0,0,2,1,2,1,1,2,1,2,0,0,0,0],
        [0,0,0,0,2,1,1,1,1,1,1,2,0,0,0,0],
        [0,0,0,0,2,1,2,2,2,2,1,2,0,0,0,0],
        [0,0,0,0,0,2,2,2,2,2,2,0,0,0,0,0],
        [0,0,0,0,0,3,4,4,4,4,3,0,0,0,0,0],
        [0,0,0,0,3,3,4,4,4,4,3,3,0,0,0,0],
        [0,0,0,0,3,4,4,4,4,4,4,3,0,0,0,0],
        [0,0,0,0,3,4,4,4,4,4,4,3,0,0,0,0],
        [0,0,0,0,0,3,3,3,3,3,3,0,0,0,0,0],
        [0,0,0,0,0,5,5,0,0,5,5,0,0,0,0,0],
        [0,0,0,0,0,5,5,0,0,5,5,0,0,0,0,0],
        [0,0,0,0,0,5,5,0,0,5,5,0,0,0,0,0],
      ]
    },
    // Frame 1: Left leg forward
    {
      width: 16,
      height: 16,
      colors: ['transparent', '#FFE0BD', '#2C1810', '#8B4513', '#FF6B35', '#4A4A4A'],
      pixels: [
        [0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],
        [0,0,0,0,0,0,2,2,2,2,0,0,0,0,0,0],
        [0,0,0,0,0,2,1,1,1,1,2,0,0,0,0,0],
        [0,0,0,0,2,1,1,1,1,1,1,2,0,0,0,0],
        [0,0,0,0,2,1,2,1,1,2,1,2,0,0,0,0],
        [0,0,0,0,2,1,1,1,1,1,1,2,0,0,0,0],
        [0,0,0,0,2,1,2,2,2,2,1,2,0,0,0,0],
        [0,0,0,0,0,2,2,2,2,2,2,0,0,0,0,0],
        [0,0,0,0,0,3,4,4,4,4,3,0,0,0,0,0],
        [0,0,0,0,3,3,4,4,4,4,3,3,0,0,0,0],
        [0,0,0,0,3,4,4,4,4,4,4,3,0,0,0,0],
        [0,0,0,0,3,4,4,4,4,4,4,3,0,0,0,0],
        [0,0,0,0,0,3,3,3,3,3,3,0,0,0,0,0],
        [0,0,0,0,5,5,0,0,0,5,5,0,0,0,0,0],
        [0,0,0,0,5,5,0,0,0,5,5,0,0,0,0,0],
        [0,0,0,5,5,0,0,0,0,0,5,5,0,0,0,0],
      ]
    },
    // Frame 2: Right leg forward
    {
      width: 16,
      height: 16,
      colors: ['transparent', '#FFE0BD', '#2C1810', '#8B4513', '#FF6B35', '#4A4A4A'],
      pixels: [
        [0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],
        [0,0,0,0,0,0,2,2,2,2,0,0,0,0,0,0],
        [0,0,0,0,0,2,1,1,1,1,2,0,0,0,0,0],
        [0,0,0,0,2,1,1,1,1,1,1,2,0,0,0,0],
        [0,0,0,0,2,1,2,1,1,2,1,2,0,0,0,0],
        [0,0,0,0,2,1,1,1,1,1,1,2,0,0,0,0],
        [0,0,0,0,2,1,2,2,2,2,1,2,0,0,0,0],
        [0,0,0,0,0,2,2,2,2,2,2,0,0,0,0,0],
        [0,0,0,0,0,3,4,4,4,4,3,0,0,0,0,0],
        [0,0,0,0,3,3,4,4,4,4,3,3,0,0,0,0],
        [0,0,0,0,3,4,4,4,4,4,4,3,0,0,0,0],
        [0,0,0,0,3,4,4,4,4,4,4,3,0,0,0,0],
        [0,0,0,0,0,3,3,3,3,3,3,0,0,0,0,0],
        [0,0,0,0,0,5,5,0,0,5,5,0,0,0,0,0],
        [0,0,0,0,0,5,5,0,0,5,5,0,0,0,0,0],
        [0,0,0,0,0,5,5,0,5,5,0,0,0,0,0,0],
      ]
    }
  ],
  up: [
    // Frame 0: Standing (back view)
    {
      width: 16,
      height: 16,
      colors: ['transparent', '#FFE0BD', '#2C1810', '#8B4513', '#FF6B35', '#4A4A4A'],
      pixels: [
        [0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],
        [0,0,0,0,0,0,2,2,2,2,0,0,0,0,0,0],
        [0,0,0,0,0,2,2,2,2,2,2,0,0,0,0,0],
        [0,0,0,0,2,2,2,2,2,2,2,2,0,0,0,0],
        [0,0,0,0,2,2,1,1,1,1,2,2,0,0,0,0],
        [0,0,0,0,2,1,1,1,1,1,1,2,0,0,0,0],
        [0,0,0,0,2,1,1,1,1,1,1,2,0,0,0,0],
        [0,0,0,0,0,2,2,2,2,2,2,0,0,0,0,0],
        [0,0,0,0,0,3,4,4,4,4,3,0,0,0,0,0],
        [0,0,0,0,3,3,4,4,4,4,3,3,0,0,0,0],
        [0,0,0,0,3,4,4,4,4,4,4,3,0,0,0,0],
        [0,0,0,0,3,4,4,4,4,4,4,3,0,0,0,0],
        [0,0,0,0,0,3,3,3,3,3,3,0,0,0,0,0],
        [0,0,0,0,0,5,5,0,0,5,5,0,0,0,0,0],
        [0,0,0,0,0,5,5,0,0,5,5,0,0,0,0,0],
        [0,0,0,0,0,5,5,0,0,5,5,0,0,0,0,0],
      ]
    },
    // Frame 1: Left leg forward
    {
      width: 16,
      height: 16,
      colors: ['transparent', '#FFE0BD', '#2C1810', '#8B4513', '#FF6B35', '#4A4A4A'],
      pixels: [
        [0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],
        [0,0,0,0,0,0,2,2,2,2,0,0,0,0,0,0],
        [0,0,0,0,0,2,2,2,2,2,2,0,0,0,0,0],
        [0,0,0,0,2,2,2,2,2,2,2,2,0,0,0,0],
        [0,0,0,0,2,2,1,1,1,1,2,2,0,0,0,0],
        [0,0,0,0,2,1,1,1,1,1,1,2,0,0,0,0],
        [0,0,0,0,2,1,1,1,1,1,1,2,0,0,0,0],
        [0,0,0,0,0,2,2,2,2,2,2,0,0,0,0,0],
        [0,0,0,0,0,3,4,4,4,4,3,0,0,0,0,0],
        [0,0,0,0,3,3,4,4,4,4,3,3,0,0,0,0],
        [0,0,0,0,3,4,4,4,4,4,4,3,0,0,0,0],
        [0,0,0,0,3,4,4,4,4,4,4,3,0,0,0,0],
        [0,0,0,0,0,3,3,3,3,3,3,0,0,0,0,0],
        [0,0,0,0,5,5,0,0,0,5,5,0,0,0,0,0],
        [0,0,0,0,5,5,0,0,0,5,5,0,0,0,0,0],
        [0,0,0,5,5,0,0,0,0,0,5,5,0,0,0,0],
      ]
    },
    // Frame 2: Right leg forward
    {
      width: 16,
      height: 16,
      colors: ['transparent', '#FFE0BD', '#2C1810', '#8B4513', '#FF6B35', '#4A4A4A'],
      pixels: [
        [0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],
        [0,0,0,0,0,0,2,2,2,2,0,0,0,0,0,0],
        [0,0,0,0,0,2,2,2,2,2,2,0,0,0,0,0],
        [0,0,0,0,2,2,2,2,2,2,2,2,0,0,0,0],
        [0,0,0,0,2,2,1,1,1,1,2,2,0,0,0,0],
        [0,0,0,0,2,1,1,1,1,1,1,2,0,0,0,0],
        [0,0,0,0,2,1,1,1,1,1,1,2,0,0,0,0],
        [0,0,0,0,0,2,2,2,2,2,2,0,0,0,0,0],
        [0,0,0,0,0,3,4,4,4,4,3,0,0,0,0,0],
        [0,0,0,0,3,3,4,4,4,4,3,3,0,0,0,0],
        [0,0,0,0,3,4,4,4,4,4,4,3,0,0,0,0],
        [0,0,0,0,3,4,4,4,4,4,4,3,0,0,0,0],
        [0,0,0,0,0,3,3,3,3,3,3,0,0,0,0,0],
        [0,0,0,0,0,5,5,0,0,5,5,0,0,0,0,0],
        [0,0,0,0,0,5,5,0,0,5,5,0,0,0,0,0],
        [0,0,0,0,0,5,5,0,5,5,0,0,0,0,0,0],
      ]
    }
  ],
  left: [
    // Frame 0: Standing (side view)
    {
      width: 16,
      height: 16,
      colors: ['transparent', '#FFE0BD', '#2C1810', '#8B4513', '#FF6B35', '#4A4A4A'],
      pixels: [
        [0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],
        [0,0,0,0,0,0,0,2,2,2,0,0,0,0,0,0],
        [0,0,0,0,0,0,2,1,1,1,2,0,0,0,0,0],
        [0,0,0,0,0,2,1,1,1,1,1,2,0,0,0,0],
        [0,0,0,0,0,2,2,1,1,2,1,2,0,0,0,0],
        [0,0,0,0,0,2,1,1,1,1,1,2,0,0,0,0],
        [0,0,0,0,0,2,1,2,2,2,2,0,0,0,0,0],
        [0,0,0,0,0,0,2,2,2,2,0,0,0,0,0,0],
        [0,0,0,0,0,0,3,4,4,3,0,0,0,0,0,0],
        [0,0,0,0,0,3,4,4,4,3,0,0,0,0,0,0],
        [0,0,0,0,0,3,4,4,4,3,0,0,0,0,0,0],
        [0,0,0,0,0,3,4,4,4,3,0,0,0,0,0,0],
        [0,0,0,0,0,0,3,3,3,0,0,0,0,0,0,0],
        [0,0,0,0,0,0,5,5,5,0,0,0,0,0,0,0],
        [0,0,0,0,0,0,5,5,5,0,0,0,0,0,0,0],
        [0,0,0,0,0,0,5,5,5,0,0,0,0,0,0,0],
      ]
    },
    // Frame 1: Walking step 1
    {
      width: 16,
      height: 16,
      colors: ['transparent', '#FFE0BD', '#2C1810', '#8B4513', '#FF6B35', '#4A4A4A'],
      pixels: [
        [0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],
        [0,0,0,0,0,0,0,2,2,2,0,0,0,0,0,0],
        [0,0,0,0,0,0,2,1,1,1,2,0,0,0,0,0],
        [0,0,0,0,0,2,1,1,1,1,1,2,0,0,0,0],
        [0,0,0,0,0,2,2,1,1,2,1,2,0,0,0,0],
        [0,0,0,0,0,2,1,1,1,1,1,2,0,0,0,0],
        [0,0,0,0,0,2,1,2,2,2,2,0,0,0,0,0],
        [0,0,0,0,0,0,2,2,2,2,0,0,0,0,0,0],
        [0,0,0,0,0,0,3,4,4,3,0,0,0,0,0,0],
        [0,0,0,0,0,3,4,4,4,3,0,0,0,0,0,0],
        [0,0,0,0,0,3,4,4,4,3,0,0,0,0,0,0],
        [0,0,0,0,0,3,4,4,4,3,0,0,0,0,0,0],
        [0,0,0,0,0,0,3,3,3,0,0,0,0,0,0,0],
        [0,0,0,0,5,5,0,0,5,5,0,0,0,0,0,0],
        [0,0,0,0,5,5,0,0,5,5,0,0,0,0,0,0],
        [0,0,0,5,5,0,0,0,0,5,5,0,0,0,0,0],
      ]
    },
    // Frame 2: Walking step 2
    {
      width: 16,
      height: 16,
      colors: ['transparent', '#FFE0BD', '#2C1810', '#8B4513', '#FF6B35', '#4A4A4A'],
      pixels: [
        [0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],
        [0,0,0,0,0,0,0,2,2,2,0,0,0,0,0,0],
        [0,0,0,0,0,0,2,1,1,1,2,0,0,0,0,0],
        [0,0,0,0,0,2,1,1,1,1,1,2,0,0,0,0],
        [0,0,0,0,0,2,2,1,1,2,1,2,0,0,0,0],
        [0,0,0,0,0,2,1,1,1,1,1,2,0,0,0,0],
        [0,0,0,0,0,2,1,2,2,2,2,0,0,0,0,0],
        [0,0,0,0,0,0,2,2,2,2,0,0,0,0,0,0],
        [0,0,0,0,0,0,3,4,4,3,0,0,0,0,0,0],
        [0,0,0,0,0,3,4,4,4,3,0,0,0,0,0,0],
        [0,0,0,0,0,3,4,4,4,3,0,0,0,0,0,0],
        [0,0,0,0,0,3,4,4,4,3,0,0,0,0,0,0],
        [0,0,0,0,0,0,3,3,3,0,0,0,0,0,0,0],
        [0,0,0,0,0,0,5,5,5,0,0,0,0,0,0,0],
        [0,0,0,0,0,0,5,5,5,0,0,0,0,0,0,0],
        [0,0,0,0,0,5,5,0,5,5,0,0,0,0,0,0],
      ]
    }
  ],
  right: [
    // Frame 0: Standing (side view - mirrored)
    {
      width: 16,
      height: 16,
      colors: ['transparent', '#FFE0BD', '#2C1810', '#8B4513', '#FF6B35', '#4A4A4A'],
      pixels: [
        [0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],
        [0,0,0,0,0,0,2,2,2,0,0,0,0,0,0,0],
        [0,0,0,0,0,2,1,1,1,2,0,0,0,0,0,0],
        [0,0,0,0,2,1,1,1,1,1,2,0,0,0,0,0],
        [0,0,0,0,2,1,2,1,1,2,2,0,0,0,0,0],
        [0,0,0,0,2,1,1,1,1,1,2,0,0,0,0,0],
        [0,0,0,0,0,2,2,2,2,1,2,0,0,0,0,0],
        [0,0,0,0,0,0,2,2,2,2,0,0,0,0,0,0],
        [0,0,0,0,0,0,3,4,4,3,0,0,0,0,0,0],
        [0,0,0,0,0,0,3,4,4,4,3,0,0,0,0,0],
        [0,0,0,0,0,0,3,4,4,4,3,0,0,0,0,0],
        [0,0,0,0,0,0,3,4,4,4,3,0,0,0,0,0],
        [0,0,0,0,0,0,0,3,3,3,0,0,0,0,0,0],
        [0,0,0,0,0,0,5,5,5,0,0,0,0,0,0,0],
        [0,0,0,0,0,0,5,5,5,0,0,0,0,0,0,0],
        [0,0,0,0,0,0,5,5,5,0,0,0,0,0,0,0],
      ]
    },
    // Frame 1: Walking step 1
    {
      width: 16,
      height: 16,
      colors: ['transparent', '#FFE0BD', '#2C1810', '#8B4513', '#FF6B35', '#4A4A4A'],
      pixels: [
        [0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],
        [0,0,0,0,0,0,2,2,2,0,0,0,0,0,0,0],
        [0,0,0,0,0,2,1,1,1,2,0,0,0,0,0,0],
        [0,0,0,0,2,1,1,1,1,1,2,0,0,0,0,0],
        [0,0,0,0,2,1,2,1,1,2,2,0,0,0,0,0],
        [0,0,0,0,2,1,1,1,1,1,2,0,0,0,0,0],
        [0,0,0,0,0,2,2,2,2,1,2,0,0,0,0,0],
        [0,0,0,0,0,0,2,2,2,2,0,0,0,0,0,0],
        [0,0,0,0,0,0,3,4,4,3,0,0,0,0,0,0],
        [0,0,0,0,0,0,3,4,4,4,3,0,0,0,0,0],
        [0,0,0,0,0,0,3,4,4,4,3,0,0,0,0,0],
        [0,0,0,0,0,0,3,4,4,4,3,0,0,0,0,0],
        [0,0,0,0,0,0,0,3,3,3,0,0,0,0,0,0],
        [0,0,0,0,0,0,5,5,0,0,5,5,0,0,0,0],
        [0,0,0,0,0,0,5,5,0,0,5,5,0,0,0,0],
        [0,0,0,0,0,0,5,5,0,0,0,5,5,0,0,0],
      ]
    },
    // Frame 2: Walking step 2
    {
      width: 16,
      height: 16,
      colors: ['transparent', '#FFE0BD', '#2C1810', '#8B4513', '#FF6B35', '#4A4A4A'],
      pixels: [
        [0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],
        [0,0,0,0,0,0,2,2,2,0,0,0,0,0,0,0],
        [0,0,0,0,0,2,1,1,1,2,0,0,0,0,0,0],
        [0,0,0,0,2,1,1,1,1,1,2,0,0,0,0,0],
        [0,0,0,0,2,1,2,1,1,2,2,0,0,0,0,0],
        [0,0,0,0,2,1,1,1,1,1,2,0,0,0,0,0],
        [0,0,0,0,0,2,2,2,2,1,2,0,0,0,0,0],
        [0,0,0,0,0,0,2,2,2,2,0,0,0,0,0,0],
        [0,0,0,0,0,0,3,4,4,3,0,0,0,0,0,0],
        [0,0,0,0,0,0,3,4,4,4,3,0,0,0,0,0],
        [0,0,0,0,0,0,3,4,4,4,3,0,0,0,0,0],
        [0,0,0,0,0,0,3,4,4,4,3,0,0,0,0,0],
        [0,0,0,0,0,0,0,3,3,3,0,0,0,0,0,0],
        [0,0,0,0,0,0,5,5,5,0,0,0,0,0,0,0],
        [0,0,0,0,0,0,5,5,5,0,0,0,0,0,0,0],
        [0,0,0,0,0,0,5,5,0,5,5,0,0,0,0,0],
      ]
    }
  ]
};

/**
 * Renders a pixel sprite to a canvas element
 */
export function renderSprite(
  canvas: HTMLCanvasElement,
  sprite: SpriteData,
  scale: number = 3
): void {
  const ctx = canvas.getContext('2d');
  if (!ctx) return;

  canvas.width = sprite.width * scale;
  canvas.height = sprite.height * scale;

  // Enable image smoothing for pixel art
  ctx.imageSmoothingEnabled = false;

  // Clear canvas
  ctx.clearRect(0, 0, canvas.width, canvas.height);

  // Draw each pixel
  for (let y = 0; y < sprite.height; y++) {
    for (let x = 0; x < sprite.width; x++) {
      const colorIndex = sprite.pixels[y][x];
      if (colorIndex > 0) {
        ctx.fillStyle = sprite.colors[colorIndex];
        ctx.fillRect(x * scale, y * scale, scale, scale);
      }
    }
  }
}
